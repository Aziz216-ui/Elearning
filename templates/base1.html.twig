<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('admin/img/apple-icon.png') }}" />
    <link rel="icon" type="image/png" href="{{ asset('admin/img/favicon.png') }}" />

    <title>{% block title %}Tableau de bord{% endblock %} - Admin</title>

    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

    <!-- Nucleo Icons -->
    <link href="{{ asset('admin/css/nucleo-icons.css') }}" rel="stylesheet" />
    <link href="{{ asset('admin/css/nucleo-svg.css') }}" rel="stylesheet" />

    <!-- Main Styling -->
    <link href="{{ asset('admin/css/argon-dashboard-tailwind.css') }}" rel="stylesheet" />
    
    <style>
      :root {
        --primary: #19C7D8;
        --primary-hover: #14B2C2;
        --light-bg: #E6FAFC;
        --dark-text: #0F2E3D;
        --grey-text: #5C6B73;
      }

      h1, h2, h3 {
        color: var(--dark-text);
      }

      .btn-primary-custom {
        background: var(--primary);
        color: #fff;
        border: none;
        padding: 10px 22px;
        border-radius: 8px;
        font-weight: 600;
        transition: 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
      }

      .btn-primary-custom:hover {
        background: var(--primary-hover);
        color: #fff;
      }

      .btn-outline-custom {
        border: 2px solid var(--primary);
        color: var(--primary);
        padding: 10px 22px;
        border-radius: 8px;
        background: transparent;
        font-weight: 600;
        transition: 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
      }

      .btn-outline-custom:hover {
        background: var(--light-bg);
      }

      .badge-primary-custom {
        background: var(--light-bg);
        color: var(--primary);
        font-weight: 600;
        padding: 6px 14px;
        border-radius: 6px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .card-custom {
        border: 1px solid #eaeaea;
        border-radius: 12px;
        padding: 25px;
        background: white;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        transition: 0.3s ease;
      }

      .card-custom:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      }
    </style>

    {% block stylesheets %}{% endblock %}
  </head>

  <body class="m-0 font-sans text-base antialiased font-normal dark:bg-slate-900 leading-default bg-gray-50 text-slate-500">
    <div class="absolute w-full bg-blue-500 dark:hidden min-h-75"></div>

    <!-- ====== Sidebar ====== -->
    <aside class="fixed inset-y-0 flex-wrap items-center justify-between block w-full p-0 my-4 overflow-y-auto antialiased transition-transform duration-200 -translate-x-full bg-white border-0 shadow-xl dark:shadow-none dark:bg-slate-850 max-w-64 ease-nav-brand z-990 xl:ml-6 rounded-2xl xl:left-0 xl:translate-x-0" aria-expanded="false">
      <div class="h-19">
        <a class="block px-8 py-6 text-sm whitespace-nowrap dark:text-white text-slate-700" href="{{ path('app_dashboard') }}">
          <img src="{{ asset('admin/img/logo-ct-dark.png') }}" class="inline h-8 dark:hidden" alt="Logo" />
          <img src="{{ asset('admin/img/logo-ct.png') }}" class="hidden h-8 dark:inline" alt="Logo" />
          <span class="ml-1 font-semibold">Tableau de bord</span>
        </a>
      </div>

      <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent" />

      <div class="overflow-auto grow">
        <ul class="flex flex-col pl-0 mb-0">
          <li class="mt-0.5">
            <a href="{{ path('app_dashboard') }}" class="flex items-center px-4 py-2 text-slate-700 dark:text-white {% if app.request.get('_route') == 'app_dashboard' %}bg-blue-500/20 rounded-lg text-blue-500{% endif %}">
              <i class="ni ni-tv-2 text-blue-500 mr-2"></i> Tableau de bord
            </a>
          </li>
          {# Liens désactivés jusqu'à ce que les contrôleurs correspondants soient créés
          <li class="mt-0.5">
            <a href="#" class="flex items-center px-4 py-2 text-slate-400 dark:text-slate-500 cursor-not-allowed">
              <i class="ni ni-books text-slate-400 mr-2"></i> Cours
              <span class="ml-2 text-xs text-slate-500">(Bientôt disponible)</span>
            </a>
          </li>
          <li class="mt-0.5">
            <a href="#" class="flex items-center px-4 py-2 text-slate-400 dark:text-slate-500 cursor-not-allowed">
              <i class="ni ni-single-02 text-slate-400 mr-2"></i> Utilisateurs
              <span class="ml-2 text-xs text-slate-500">(Bientôt disponible)</span>
            </a>
          </li>
          <li class="mt-0.5">
            <a href="#" class="flex items-center px-4 py-2 text-slate-400 dark:text-slate-500 cursor-not-allowed">
              <i class="ni ni-tag text-slate-400 mr-2"></i> Catégories
              <span class="ml-2 text-xs text-slate-500">(Bientôt disponible)</span>
            </a>
          </li>
          #}
        </ul>
      </div>
    </aside>
    <!-- ====== End Sidebar ====== -->

    <!-- ====== Main Content ====== -->
    <div class="xl:ml-64 relative min-h-screen flex flex-col">
      <!-- Navbar -->
      <nav class="w-full px-6 py-3 bg-white border-b border-gray-200 shadow-sm dark:bg-slate-850 dark:border-slate-800 sticky top-0 z-40">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <button class="xl:hidden text-slate-700 dark:text-white" id="sidebarToggle">
              <i class="fas fa-bars"></i>
            </button>
            <h1 class="text-xl font-semibold text-slate-700 dark:text-white">
              {% block page_title %}{% endblock %}
            </h1>
          </div>
          <div class="flex items-center space-x-4">
            <div class="relative">
              <button class="p-2 text-slate-600 dark:text-slate-200 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700">
                <i class="fas fa-bell"></i>
                <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
              </button>
            </div>
            <div class="relative" x-data="{ open: false }">
              <button @click="open = !open" class="flex items-center space-x-2">
                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white">
                  {{ app.user ? app.user.name|first|upper : 'A' }}
                </div>
                <span class="text-slate-700 dark:text-white">{{ app.user ? app.user.name : 'Admin' }}</span>
                <i class="fas fa-chevron-down text-xs"></i>
              </button>
              <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg py-1 z-50">
                <a href="{{ path('app_profile') }}" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">
                  <i class="fas fa-user mr-2"></i> Mon profil
                </a>
                <a href="{{ path('app_logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-slate-700">
                  <i class="fas fa-sign-out-alt mr-2"></i> Déconnexion
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

      <!-- Main content -->
      <main class="flex-1 p-6">
        {% block body %}{% endblock %}
      </main>
      <!-- End Main content -->

      <!-- Footer -->
      <footer class="pt-4 mt-auto">
        <div class="w-full px-6 mx-auto text-center text-sm text-slate-500">
          © {{ "now"|date("Y") }}, fait avec <i class="fa fa-heart text-red-500"></i> par
          <a href="{{ path('app_home') }}" class="font-semibold text-slate-700 dark:text-white hover:text-blue-500">eLEARNING</a>
        </div>
      </footer>
      <!-- End Footer -->
    </div>

    <!-- ====== Scripts ====== -->
    <script src="{{ asset('admin/js/plugins/chartjs.min.js') }}"></script>
    <script src="{{ asset('admin/js/plugins/perfect-scrollbar.min.js') }}"></script>
    <script src="{{ asset('admin/js/argon-dashboard-tailwind.js') }}"></script>
    
    <script>
      // Toggle sidebar on mobile
      document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.querySelector('aside');
        
        if (sidebarToggle && sidebar) {
          sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('-translate-x-full');
          });
          
          // Close sidebar when clicking outside on mobile
          document.addEventListener('click', function(event) {
            if (window.innerWidth < 1280 && 
                !sidebar.contains(event.target) && 
                !sidebarToggle.contains(event.target)) {
              sidebar.classList.add('-translate-x-full');
            }
          });
        }
      });
    </script>
    
    {% block javascripts %}{% endblock %}
  </body>
</html>
