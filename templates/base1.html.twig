<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('admin/img/apple-icon.png') }}" />
    <link rel="icon" type="image/png" href="{{ asset('admin/img/favicon.png') }}" />

    <title>{% block title %}Dashboard{% endblock %}</title>

    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

    <!-- Nucleo Icons -->
    <link href="{{ asset('admin/css/nucleo-icons.css') }}" rel="stylesheet" />
    <link href="{{ asset('admin/css/nucleo-svg.css') }}" rel="stylesheet" />

    <!-- Main Styling -->
    <link href="{{ asset('admin/css/argon-dashboard-tailwind.css?v=1.0.1') }}" rel="stylesheet" />


  </head>
  <style>
    /* Global reset and fixes */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      height: 100%;
      overflow-x: hidden;
    }
    /* Clear z-index layers */
    .z-header { z-index: 1000; }
    .z-sidebar { z-index: 999; }
    .z-dropdown { z-index: 1050; }
    .z-modal { z-index: 1100; }
    /* Main content wrapper spacing */
    .main-content-wrapper {
      min-height: calc(100vh - 80px);
      display: flex;
      flex-direction: column;
      position: relative; /* Ensure stacking context above background/slider */
      z-index: 1;
    }
    /* Mobile responsiveness */
    @media (max-width: 1023px) {
      .sidebar-mobile {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .sidebar-mobile.open {
        transform: translateX(0);
      }
      .main-content-mobile {
        margin-left: 0 !important;
        padding-top: 70px;
      }
      .navbar-mobile {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
      }
    }
    /* Keep content centered and readable */
    .content-max-width { max-width: 56rem; /* ~max-w-3xl */ width: 100%; position: relative; z-index: 1; }
    .safe-area { padding: 1rem; overflow: visible; }
    /* Ensure main area is above any sliders/absolute elements */
    main#main {
      position: relative;
      z-index: 1;
    }
  </style>

  <body class="m-0 font-sans text-base antialiased font-normal dark:bg-slate-900 leading-default bg-gray-50 text-slate-500 overflow-x-hidden">
    <div class="absolute w-full bg-blue-500 dark:hidden min-h-75 -z-10"></div>
    <!-- Sidebar Overlay for Mobile -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-980 hidden lg:hidden"></div>

    <!-- ====== Sidebar ====== -->
    <aside id="sidebar" class="sidebar-mobile fixed inset-y-0 flex-wrap items-center justify-between block w-64 p-0 my-4 overflow-y-auto antialiased transition-transform duration-200 bg-white border-0 shadow-xl dark:shadow-none dark:bg-slate-850 ease-nav-brand z-990 lg:ml-6 rounded-2xl lg:left-0 lg:translate-x-0" aria-expanded="true">
      <div class="h-19">
        <a class="block px-8 py-6 text-sm whitespace-nowrap dark:text-white text-slate-700" href="#">
          <img src="{{ asset('admin/img/logo-ct-dark.png') }}" class="inline h-8 dark:hidden" alt="main_logo" />
          <img src="{{ asset('admin/img/logo-ct.png') }}" class="hidden h-8 dark:inline" alt="main_logo" />
          <span class="ml-1 font-semibold">Argon Dashboard</span>
        </a>
      </div>

      <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent" />

      <div class="overflow-auto grow">
        <ul class="flex flex-col pl-0 mb-0">
          <li class="mt-0.5">
            <a href="{{ path('app_dashboard') }}" class="flex items-center px-4 py-2 text-slate-700 dark:text-white {{ app.request.attributes.get('_route') == 'app_dashboard' ? 'font-semibold text-blue-600 dark:text-blue-400' : '' }}">
              <i class="ni ni-tv-2 text-blue-500 mr-2"></i> Dashboard
            </a>
          </li>
          <li class="mt-0.5">
            <a href="#" class="flex items-center px-4 py-2 text-slate-700 dark:text-white">
              <i class="ni ni-calendar-grid-58 text-orange-500 mr-2"></i> Tables
            </a>
          </li>
          <li class="mt-0.5">
            <a href="#" class="flex items-center px-4 py-2 text-slate-700 dark:text-white">
              <i class="ni ni-single-02 text-emerald-500 mr-2"></i> Users
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <!-- ====== End Sidebar ====== -->

    <!-- ====== Main Content ====== -->
    <div class="main-content-wrapper ml-0 lg:ml-64 transition-all duration-200">
      <!-- Navbar -->
      <nav class="navbar-mobile w-full px-4 lg:px-6 py-3 bg-white border-b border-gray-200 shadow-sm dark:bg-slate-850 dark:border-slate-800 fixed top-0 left-0 right-0 z-1000">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <!-- Mobile sidebar toggle -->
            <button id="sidebarToggle" class="lg:hidden p-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none" aria-label="Toggle sidebar">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5" />
              </svg>
            </button>
            <img src="{{ asset('admin/img/logo-ct.png') }}" alt="Logo" class="h-8 w-8" />
            <span class="text-slate-700 dark:text-white font-semibold">Dashboard</span>
          </div>
          {% set currentRoute = app.request.attributes.get('_route') %}
          {% set isCourses = currentRoute is defined and currentRoute starts with 'app_cours' %}
          <div class="flex items-center space-x-4">
            <a href="#" class="text-slate-600 dark:text-slate-200 text-sm">Home</a>
            <a href="{{ path('app_cours_index') }}"
               class="text-sm {{ isCourses ? 'text-blue-600 dark:text-blue-400 font-semibold' : 'text-slate-600 dark:text-slate-200' }}">
              Courses
            </a>
            <a href="#" class="text-slate-600 dark:text-slate-200 text-sm">Profile</a>
            <a href="#" class="text-slate-600 dark:text-slate-200 text-sm">Logout</a>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

      <!-- Main content -->
      <main id="main" class="main-content-mobile flex-1 w-full px-4 lg:px-10 py-8 mt-16 lg:ml-0 safe-area">
        <div class="content-max-width mx-auto">
          {% block body %}
          {% endblock %}
        </div>
      </main>


      <!-- Footer -->
      <footer class="pt-4 mt-auto">
        <div class="w-full px-6 mx-auto text-center text-sm text-slate-500">
          Â© {{ "now"|date("Y") }}, made with <i class="fa fa-heart text-red-500"></i> by
          <a href="https://www.creative-tim.com" class="font-semibold text-slate-700 dark:text-white" target="_blank">Creative Tim</a>
        </div>
      </footer>
      <!-- End Footer -->
    </div>

    <!-- ====== Scripts ====== -->
    <script src="{{ asset('admin/js/plugins/chartjs.min.js') }}"></script>
    <script src="{{ asset('admin/js/plugins/perfect-scrollbar.min.js') }}"></script>
    <script src="{{ asset('admin/js/argon-dashboard-tailwind.js?v=1.0.1') }}"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        const toggle = document.getElementById('sidebarToggle');
        const body = document.body;

        const openSidebar = () => {
          if (!sidebar) return;
          sidebar.classList.add('open');
          if (overlay) overlay.classList.remove('hidden');
          body.classList.add('overflow-hidden');
        };

        const closeSidebar = () => {
          if (!sidebar) return;
          sidebar.classList.remove('open');
          if (overlay) overlay.classList.add('hidden');
          body.classList.remove('overflow-hidden');
        };

        // Toggle sidebar
        toggle && toggle.addEventListener('click', function () {
          const isOpen = sidebar.classList.contains('open');
          if (isOpen) closeSidebar(); else openSidebar();
        });

        // Close sidebar when overlay is clicked
        overlay && overlay.addEventListener('click', closeSidebar);

        // Close sidebar with Escape key
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Escape') closeSidebar();
        });

        // Handle responsive behavior
        const handleResize = () => {
          if (window.innerWidth >= 1024) {
            // Large screens: ensure sidebar is docked and overlay is hidden
            sidebar && sidebar.classList.remove('open');
            overlay && overlay.classList.add('hidden');
            body.classList.remove('overflow-hidden');
          } else {
            // Small screens: keep sidebar hidden by default
            sidebar && sidebar.classList.remove('open');
            overlay && overlay.classList.add('hidden');
            body.classList.remove('overflow-hidden');
          }
        };
        // Initial setup
        handleResize();
        // Listen for resize events
        window.addEventListener('resize', handleResize);

        // Close sidebar when a navigation link is clicked on mobile
        document.querySelectorAll('#sidebar a').forEach(link => {
          link.addEventListener('click', () => {
            if (window.innerWidth < 1024) {
              closeSidebar();
            }
          });
        });
      });
    </script>

    {% block javascripts %}{% endblock %}
  </body>
</html>
